import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as n}from"./index.BVOCwoKb.js";import{W as U,A as q,L as X,d as G}from"./plat.q0P4XGow.js";import{l as j}from"./favicon.Dqa8s5y_.js";import{c as J}from"./client.DY8IqZiE.js";const K=({checked:c,onChange:a,className:o})=>e.jsx("button",{type:"button",role:"switch","aria-checked":c,onClick:()=>a(!c),className:`relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-2 focus:ring-offset-background ${c?"bg-blue-500":"bg-gray-600"} ${o}`,children:e.jsx("span",{"aria-hidden":"true",className:`pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${c?"translate-x-5":"translate-x-0"}`})}),te=({translations:c})=>{const a=J(c),[o,w]=n.useState("windows"),[P,E]=n.useState(0),[g,A]=n.useState({width:0,left:0,top:0,height:0}),f=n.useRef(null),[I,T]=n.useState(!1),[v,V]=n.useState(!0),[N,y]=n.useState(null),[C,W]=n.useState(null),[u,S]=n.useState(null),[$,R]=n.useState(null),[x,H]=n.useState([]),[z,M]=n.useState(!0),[p,k]=n.useState("stable"),O={"#win":"windows","#macos":"macos","#linux":"linux"},_=s=>{if(!f.current)return;const t=f.current.querySelector(`button[data-platform="${s}"]`);if(!t)return;const{offsetLeft:i,offsetTop:r,offsetWidth:m,offsetHeight:d}=t;A({left:i,top:r,width:m,height:d})};n.useEffect(()=>{const s=()=>{const t=window.location.hash,i=O[t];if(i)w(i);else{const r=G();w(r)}};return s(),window.addEventListener("hashchange",s),()=>{window.removeEventListener("hashchange",s)}},[]),n.useEffect(()=>{T(!0)},[]),n.useEffect(()=>{_(o);const s=()=>_(o);return window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)},[o]),n.useEffect(()=>{(async()=>{try{const t=await fetch("https://ghfile.geekertao.top/https://api.github.com/repos/Class-Widgets/Class-Widgets/releases");if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const i=await t.json(),r=i.find(d=>!d.prerelease);if(r){y(r.tag_name);const d=new Date(r.published_at);W(d.toLocaleDateString("zh-CN"))}const m=i.find(d=>d.prerelease);if(m&&r){const d=new Date(r.published_at),D=new Date(m.published_at);D>d&&(S(m.tag_name),R(D.toLocaleDateString("zh-CN")),H(m.assets))}}catch(t){console.error("获取releases失败:",t),y("v1.2.0.1"),W(null),S(null)}finally{M(!1)}})()},[]);const h=(s,t,i)=>new RegExp(`ClassWidgets-${t}-${i}(?:_\\d+)?\\.zip`,"i").test(s),F=()=>{const s=p==="prerelease"&&u?u:N||"v1.1.7.1";return p==="prerelease"&&x.length>0?{macos:{title:a("download.macos.title"),description:a("download.macos.description"),downloads:[{name:s,type:"Apple Silicon",url:l(x.find(t=>h(t.name,"Macos","arm64"))?.browser_download_url||`https://github.com/Class-Widgets/Class-Widgets/releases/download/${s}/ClassWidgets-macOS-arm64.zip`)},{name:s,type:"Intel",url:l(x.find(t=>h(t.name,"Macos","x64"))?.browser_download_url||`https://github.com/Class-Widgets/Class-Widgets/releases/download/${s}/ClassWidgets-macOS-x64.zip`)}]},windows:{title:a("download.windows.title"),description:a("download.windows.description"),downloads:[{name:s,type:"x64",url:l(x.find(t=>h(t.name,"Windows","x64"))?.browser_download_url||`https://github.com/Class-Widgets/Class-Widgets/releases/download/${s}/ClassWidgets-Windows-x64.zip`)},{name:s,type:"x86",url:l(x.find(t=>h(t.name,"Windows","x86"))?.browser_download_url||`https://github.com/Class-Widgets/Class-Widgets/releases/download/${s}/ClassWidgets-Windows-x86.zip`)}]},linux:{title:a("download.linux.title"),description:a("download.linux.description"),downloads:[{name:s,type:"Debian",url:l(x.find(t=>h(t.name,"Linux","x64"))?.browser_download_url||`https://github.com/Class-Widgets/Class-Widgets/releases/download/${s}/ClassWidgets-Linux-x64.zip`)}]}}:{macos:{title:a("download.macos.title"),description:a("download.macos.description"),downloads:[{name:s,type:"Apple Silicon",url:l(`https://github.com/Class-Widgets/Class-Widgets/releases/download/${s}/ClassWidgets-macOS-arm64.zip`)},{name:s,type:"Intel",url:l(`https://github.com/Class-Widgets/Class-Widgets/releases/download/${s}/ClassWidgets-macOS-x64.zip`)}]},windows:{title:a("download.windows.title"),description:a("download.windows.description"),downloads:[{name:s,type:"x64",url:l(`https://github.com/Class-Widgets/Class-Widgets/releases/download/${s}/ClassWidgets-Windows-x64.zip`)},{name:s,type:"x86",url:l(`https://github.com/Class-Widgets/Class-Widgets/releases/download/${s}/ClassWidgets-Windows-x86.zip`)}]},linux:{title:a("download.linux.title"),description:a("download.linux.description"),downloads:[{name:s,type:"Debian",url:l(`https://github.com/Class-Widgets/Class-Widgets/releases/download/${s}/ClassWidgets-Linux-x64.zip`)}]}}},b=[{id:"windows",name:"Windows",icon:U},{id:"macos",name:"macOS",icon:q},{id:"linux",name:"Linux",icon:X}];n.useEffect(()=>{const s=b.findIndex(t=>t.id===o);E(s)},[o]);const B="https://ghfile.geekertao.top/",l=s=>v?B+s:s,L=F();return L[o],e.jsx("div",{className:`min-h-screen bg-background text-foreground transition-all duration-700 ease-out ${I?"opacity-100 translate-y-0":"opacity-0 translate-y-4"}`,children:e.jsxs("div",{className:"max-w-6xl mx-auto px-8 py-16 md:px-12 lg:px-16",children:[e.jsxs("div",{className:"mb-16",children:[e.jsx("h1",{className:"text-5xl font-bold mb-6 text-white","data-aos":"fade-right",children:a("download.title")}),e.jsx("p",{className:"text-xl text-gray-300 max-w-3xl leading-relaxed","data-aos":"fade-right",children:e.jsx("span",{dangerouslySetInnerHTML:{__html:a("download.description")}})}),e.jsx("br",{}),e.jsxs("div",{className:"flex flex-wrap gap-4 mb-8","data-aos":"fade-right",children:[e.jsx("a",{onClick:s=>{s.preventDefault(),k("stable")},className:`cursor-pointer p-4 bg-white/5 rounded-lg shadow-md inline-flex items-center gap-4 border border-white/10 transition-all duration-300 ${p==="stable"?"bg-white/10 border-white/30 shadow-lg":"hover:bg-white/8"}`,children:z?e.jsx("span",{className:"text-sm text-gray-400",children:a("version.loading")}):e.jsxs(e.Fragment,{children:[e.jsx("img",{src:j.src,alt:"Class Widgets Logo",className:"size-12"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsxs("span",{className:"text-lg font-semibold text-white",children:[a("version.latest"),": ",N||"v1.1.7.1"]}),e.jsx("span",{className:"px-2 py-1 rounded-md text-xs font-medium bg-green-500/20 text-green-300 border border-green-500/30",children:a("version.latest")})]}),C&&e.jsxs("span",{className:"text-sm text-gray-400 block",children:[a("version.published"),": ",C]})]})]})}),u&&e.jsx("a",{onClick:s=>{s.preventDefault(),k("prerelease")},className:`cursor-pointer p-4 bg-white/5 rounded-lg shadow-md inline-flex items-center gap-4 border border-white/10 transition-all duration-300 ${p==="prerelease"?"bg-white/10 border-white/30 shadow-lg":"hover:bg-white/8"}`,children:e.jsxs(e.Fragment,{children:[e.jsx("img",{src:j.src,alt:"Class Widgets Logo",className:"size-12"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsxs("span",{className:"text-lg font-semibold text-white",children:[a("version.pre_release"),": ",u]}),e.jsx("span",{className:"px-2 py-1 rounded-md text-xs font-medium bg-orange-500/20 text-orange-300 border border-orange-500/30",children:a("version.pre_release")})]}),$&&e.jsxs("span",{className:"text-sm text-gray-400 block",children:[a("version.published"),": ",$]})]})]})})]}),e.jsxs("div",{className:"mt-8 flex items-center","data-aos":"fade-right",children:[e.jsx(K,{checked:v,onChange:V,className:"mr-2"}),e.jsx("label",{htmlFor:"useProxyToggle",className:"text-gray-300",children:a("download.use_proxy")})]})]}),e.jsx("div",{className:"mb-12","data-aos":"zoom-in-right",children:e.jsxs("div",{ref:f,className:"flex flex-wrap gap-2 bg-white/5 rounded-xl p-2 w-fit relative",children:[b.map(s=>{const t=s.icon;return e.jsxs("button",{onClick:()=>{w(s.id);const i=s.id==="windows"?"win":s.id;history.replaceState(null,"",`#${i}`)},"data-platform":s.id,className:`flex items-center gap-2 px-6 py-3 rounded-lg transition-all duration-300 relative z-10 ${o===s.id?"text-black":"text-gray-300 hover:text-white hover:bg-white/10"}`,children:[e.jsx(t,{className:"size-5"}),e.jsx("span",{className:`font-medium ${o!==s.id?"hidden md:block":""}`,children:s.name})]},s.id)}),e.jsx("div",{className:"absolute rounded-lg bg-white transition-all duration-300 z-0",style:{left:`${g.left}px`,top:`${g.top}px`,width:`${g.width}px`,height:`${g.height}px`}})]})}),e.jsx("div",{className:"bg-white/5 rounded-2xl p-8 backdrop-blur-sm border border-white/10","data-aos":"zoom-out-right",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsx("div",{className:"flex-1 overflow-hidden",children:e.jsx("div",{className:"flex transition-transform duration-300 ease-in-out",style:{transform:`translateX(-${P*100}%)`},children:b.map(s=>{const t=L[s.id];return e.jsxs("div",{className:"w-full flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(s.icon,{className:"size-8 text-white"}),e.jsx("h2",{className:"text-3xl font-semibold text-white",children:t.title})]}),e.jsx("p",{className:"text-gray-300 mb-8 whitespace-pre-line leading-relaxed",children:t.description}),e.jsx("div",{className:"space-y-4",children:z?e.jsx("p",{className:"text-gray-400",children:a("download.loading")}):t.downloads.map((i,r)=>e.jsxs("div",{className:"flex flex-wrap items-center justify-between p-4 bg-white/5 rounded-xl border border-white/10 hover:bg-white/10 transition-all duration-300",children:[e.jsx("div",{className:"flex items-center gap-4",children:e.jsx("div",{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-lg font-medium text-white",children:i.name}),e.jsx("span",{className:`px-2 py-1 rounded-md text-xs font-medium ${i.type==="Beta"?"bg-orange-500/20 text-orange-300 border border-orange-500/30":"bg-green-500/20 text-green-300 border border-green-500/30"}`,children:i.type})]})})}),e.jsxs("a",{href:i.url,className:"flex items-center justify-center gap-2 bg-white text-black px-4 py-2 rounded-lg font-medium hover:bg-gray-100 transition-all duration-300 text-sm w-full mt-2 md:w-auto md:mt-0 md:px-6 md:py-2",children:[e.jsx("svg",{className:"size-4 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("span",{className:"flex-shrink-0",children:a("download.download_button")})]})]},r))})]},s.id)})})}),e.jsx("div",{className:"ml-8 hidden lg:block",children:e.jsx("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 rounded-3xl p-6 shadow-2xl border border-white/10",children:e.jsx("img",{src:j.src,alt:"Class Widgets",className:"size-32 rounded-2xl"})})})]})}),e.jsxs("div",{className:"mt-12 text-center",children:[e.jsx("p",{className:"text-gray-400 mb-4",children:e.jsx("span",{dangerouslySetInnerHTML:{__html:a("download.footer.help")}})}),e.jsx("p",{className:"text-sm text-gray-500",children:a("download.footer.security")})]})]})})};export{te as default};
